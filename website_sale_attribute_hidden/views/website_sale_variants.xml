<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <template id="variants" inherit_id="sale.variants">
        <xpath expr="//strong[@t-field='variant_id.attribute_id.name']" position="after">
            <!-- Show a warning label that this attribute can't be edited.
                 The warning is shown to internal users too for transparency, even though it doesn't apply for them -->
            <i t-if="not variant_id.attribute_id.website_published" class="fa fa-warning text-danger" title="This attribute is hidden from customers" />
        </xpath>

        <!-- Hidden select button attribute -->
        <xpath expr="//select" position="attributes">
            <attribute name="t-att-style">'display: none' if not variant_id.attribute_id.website_published and not request.env.user.has_group('base.group_user') else False</attribute>
        </xpath>

        <!-- Hidden select attribute value -->
        <xpath expr="//option" position="attributes">
            <attribute name="t-if">value_id.product_attribute_value_id.website_published or request.env.user.has_group('base.group_user')</attribute>
        </xpath>

        <!-- Hidden radio button attribute -->
        <xpath expr="//input[@type='radio']" position="attributes">
            <attribute name="t-att-style">'display: none' if not variant_id.attribute_id.website_published and not request.env.user.has_group('base.group_user') else False</attribute>
        </xpath>

        <!-- Hidden radio button attribute value -->
        <xpath expr="//ul[@class='list-unstyled']/t/li" position="attributes">
            <attribute name="t-if">value_id.product_attribute_value_id.website_published or request.env.user.has_group('base.group_user')</attribute>
        </xpath>

        <!-- Hidden color attribute -->
        <xpath expr="//input[@t-att-title='value_id.name']" position="attributes">
            <attribute name="t-att-style">'display: none' if not variant_id.attribute_id.website_published and not request.env.user.has_group('base.group_user') else 'list-inline-item'</attribute>
        </xpath>

        <!-- Hidden color attribute value -->
        <xpath expr="//ul[@class='list-inline']/li" position="attributes">
            <attribute name="t-if">value_id.product_attribute_value_id.website_published or request.env.user.has_group('base.group_user')</attribute>
        </xpath>

    </template>

</odoo>
