<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="cart_lines_disable_qty" inherit_id="website_sale.cart_lines">
        <xpath
            expr="//div[@t-attf-class='css_quantity input-group mb-2']"
            position="before"
        >
            <!-- Tarkista kategorian asetus -->
            <t t-set="disable_cart_change" t-value="line._get_disable_qty_change()" />
        </xpath>
        <xpath expr="//input[@type='text']" position="attributes">
            <attribute
                name="t-att-disabled"
            >'disabled' if disable_cart_change else None</attribute>
        </xpath>
        <xpath
            expr="//div[@t-attf-class='css_quantity input-group mb-2']"
            position="attributes"
        >
            <attribute
                name="t-attf-class"
            >css_quantity input-group mb-2 {{ 'd-none' if disable_cart_change else '' }}</attribute>
        </xpath>
    </template>

    <template
        id="product_quantity_disable"
        inherit_id="website_sale.product_quantity"
    >
        <xpath
            expr="//a[@class='btn btn-link js_add_cart_json']/.."
            position="attributes"
        >
            <attribute name="t-if">not product.categ_id.disable_qty_change</attribute>
        </xpath>
    </template>
</odoo>
